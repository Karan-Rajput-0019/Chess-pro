<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Pro - Multiplayer Chess with ELO, Chat & Timer</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.13.4/chess.min.js"></script>
    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
</head>
<body>
    <div class="main-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <h1>‚ôüÔ∏è Chess Pro</h1>
            </div>
            <div class="user-section">
                <span id="username" class="username">Guest</span>
                <span id="userRating" class="rating-badge">1200</span>
                <button id="authBtn" class="btn btn-small">Login</button>
            </div>
        </header>

        <div class="game-layout">
            <!-- Left Sidebar - Game Settings -->
            <aside class="left-sidebar">
                <div class="settings-section">
                    <h3>‚öôÔ∏è Game Settings</h3>
                    
                    <div class="setting-group">
                        <label>Time Control</label>
                        <select id="timeControl" class="select-input">
                            <option value="bullet">‚ö° Bullet (1+0)</option>
                            <option value="blitz" selected>‚è±Ô∏è Blitz (5+0)</option>
                            <option value="rapid">üïê Rapid (10+0)</option>
                            <option value="blitz_increment">‚è±Ô∏è Blitz (3+2)</option>
                        </select>
                    </div>

                    <div class="setting-group">
                        <label>Board Theme</label>
                        <select id="themeSelect" class="select-input">
                            <option value="classic">Classic Brown</option>
                            <option value="blue">Ocean Blue</option>
                            <option value="green">Forest Green</option>
                            <option value="wood">Wood Texture</option>
                            <option value="marble">Marble</option>
                        </select>
                    </div>

                    <button id="findGameBtn" class="btn btn-primary btn-large">
                        üéÆ Find Game
                    </button>

                    <div class="stats-display">
                        <h4>Your Stats</h4>
                        <div class="stat-row">
                            <span>Games:</span>
                            <span id="totalGames">0</span>
                        </div>
                        <div class="stat-row">
                            <span>Wins:</span>
                            <span id="totalWins" class="stat-wins">0</span>
                        </div>
                        <div class="stat-row">
                            <span>Losses:</span>
                            <span id="totalLosses" class="stat-losses">0</span>
                        </div>
                        <div class="stat-row">
                            <span>Draws:</span>
                            <span id="totalDraws" class="stat-draws">0</span>
                        </div>
                        <div class="stat-row">
                            <span>Win Rate:</span>
                            <span id="winRate">0%</span>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Center - Chess Board -->
            <main class="center-content">
                <!-- Opponent Panel -->
                <div class="player-panel opponent-panel">
                    <div class="player-info">
                        <div class="player-avatar">
                            <div class="color-indicator opponent-color"></div>
                        </div>
                        <div class="player-details">
                            <span id="opponentName" class="player-name">Waiting...</span>
                            <span id="opponentRating" class="player-rating">1200</span>
                        </div>
                    </div>
                    <div class="timer-display" id="opponentTimer">
                        <span class="timer-text">5:00</span>
                    </div>
                </div>

                <!-- Game Status Bar -->
                <div id="gameStatus" class="game-status">
                    <span id="statusText">Select time control and click "Find Game"</span>
                </div>

                <!-- Chess Board -->
                <div class="board-wrapper">
                    <div id="chessboard" class="chessboard theme-classic"></div>
                </div>

                <!-- Your Player Panel -->
                <div class="player-panel your-panel">
                    <div class="timer-display" id="yourTimer">
                        <span class="timer-text">5:00</span>
                    </div>
                    <div class="player-info">
                        <div class="player-details">
                            <span id="yourName" class="player-name">You</span>
                            <span id="yourRating" class="player-rating">1200</span>
                        </div>
                        <div class="player-avatar">
                            <div class="color-indicator your-color"></div>
                        </div>
                    </div>
                </div>

                <!-- Game Controls -->
                <div class="game-controls">
                    <button id="resignBtn" class="btn btn-danger" disabled>
                        <span>üè≥Ô∏è</span> Resign
                    </button>
                    <button id="drawBtn" class="btn btn-secondary" disabled>
                        <span>ü§ù</span> Offer Draw
                    </button>
                    <button id="flipBoardBtn" class="btn btn-secondary">
                        <span>üîÑ</span> Flip Board
                    </button>
                </div>
            </main>

            <!-- Right Sidebar - Chat & Moves -->
            <aside class="right-sidebar">
                <!-- Chat Section -->
                <div class="chat-section">
                    <h3>üí¨ Game Chat</h3>
                    <div id="chatMessages" class="chat-messages"></div>
                    <div class="chat-input-wrapper">
                        <input 
                            type="text" 
                            id="chatInput" 
                            class="chat-input"
                            placeholder="Type a message..."
                            maxlength="200"
                            disabled
                        />
                        <button id="sendChatBtn" class="btn-icon" disabled>
                            <span>üì§</span>
                        </button>
                    </div>
                    <div class="quick-chat">
                        <button class="quick-btn" data-msg="Good luck! üçÄ">GL</button>
                        <button class="quick-btn" data-msg="Well played! üëè">WP</button>
                        <button class="quick-btn" data-msg="Thanks! üôè">TY</button>
                        <button class="quick-btn" data-msg="Good game! üéÆ">GG</button>
                    </div>
                </div>

                <!-- Move History -->
                <div class="moves-section">
                    <h3>üìú Move History</h3>
                    <div id="moveHistory" class="move-history"></div>
                    <button id="exportPGNBtn" class="btn btn-small" disabled>
                        Export PGN
                    </button>
                </div>
            </aside>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div id="gameOverModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="gameOverTitle">Game Over</h2>
            </div>
            <div class="modal-body">
                <div id="gameResult" class="game-result"></div>
                <div id="ratingChanges" class="rating-changes"></div>
                <p id="gameOverMessage" class="game-message"></p>
            </div>
            <div class="modal-footer">
                <button id="newGameBtn" class="btn btn-primary">
                    Play Again
                </button>
                <button id="closeModalBtn" class="btn btn-secondary">
                    Close
                </button>
            </div>
        </div>
    </div>

    <!-- Draw Offer Modal -->
    <div id="drawOfferModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ü§ù Draw Offer</h2>
            </div>
            <div class="modal-body">
                <p>Your opponent has offered a draw. Do you accept?</p>
            </div>
            <div class="modal-footer">
                <button id="acceptDrawBtn" class="btn btn-primary">
                    ‚úì Accept
                </button>
                <button id="declineDrawBtn" class="btn btn-danger">
                    ‚úó Decline
                </button>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="authModalTitle">Login</h2>
                <button id="closeAuthModal" class="btn-close">√ó</button>
            </div>
            <div class="modal-body">
                <form id="authForm">
                    <div class="form-group" id="usernameGroup" style="display:none;">
                        <label>Username</label>
                        <input 
                            type="text" 
                            id="authUsername" 
                            class="form-input"
                            placeholder="Enter username"
                            minlength="3"
                            maxlength="20"
                        />
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input 
                            type="email" 
                            id="authEmail" 
                            class="form-input"
                            placeholder="Enter email"
                            required
                        />
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input 
                            type="password" 
                            id="authPassword" 
                            class="form-input"
                            placeholder="Enter password"
                            minlength="6"
                            required
                        />
                    </div>
                    <div id="authError" class="error-message"></div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <span id="authBtnText">Login</span>
                    </button>
                </form>
                <div class="auth-toggle">
                    <span id="authToggleText">Don't have an account?</span>
                    <a href="#" id="toggleAuthMode">Register</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="loading-indicator" style="display:none;">
        <div class="spinner"></div>
        <p>Connecting...</p>
    </div>

    <!-- Main JavaScript -->
    <script src="game.js"></script>
</body>
</html>
